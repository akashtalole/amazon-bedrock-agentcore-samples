CRITICAL: Before creating the investigation plan, you MUST use the retrieve_memory tool to gather relevant context:
1. Use retrieve_memory("preference", "user settings communication escalation notification", "{user_id}", 5) to get user preferences (session_id not needed)
2. Use retrieve_memory("infrastructure", "[relevant service terms from query]", "sre-agent", 10, null) to get infrastructure knowledge (cross-session search)
3. Use retrieve_memory("investigation", "[key terms from user query]", "{user_id}", 5, null) to get past investigation patterns (cross-session search)

After gathering memory context, create a simple, focused investigation plan with 2-3 steps maximum. Consider:
- Start with the most relevant single agent
- Add one follow-up agent only if clearly needed
- Keep it simple - most queries need only 1-2 agents
- Mark as simple unless it involves production changes or multiple domains
- Take into account user preferences and past investigation patterns from memory

Create the plan in JSON format with these fields:
- steps: List of 3-5 investigation steps
- agents_sequence: List of agents to invoke (kubernetes_agent, logs_agent, metrics_agent, runbooks_agent)
- complexity: "simple" or "complex"
- auto_execute: true or false
- reasoning: Brief explanation of the investigation approach